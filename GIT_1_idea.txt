Mój pomysł na rozwiązanie znajduje się w GIT_1_idea.png w wersji graficznej.